<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Магазин DOTA 2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Более темный фон */
            color: #e2e8f0;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="bg-gray-800 p-8 rounded-2xl shadow-2xl w-full max-w-2xl">
        <h1 class="text-3xl font-bold text-center mb-2 text-yellow-300">Прайс-лист DOTA 2</h1>
        <p class="text-center text-slate-400 mb-6">дота эскорт от андрея неукраса</p>
        <p class="text-center text-slate-400 mb-8">
            Выберите услуги и предметы, которые вы хотите заказать.
        </p>

        <form id="order-form">
            <!-- Items Section -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8" id="item-list">
                
                <!-- Win (Победа в катке) -->
                <div class="bg-gray-700 p-4 rounded-xl shadow-lg flex items-center justify-between">
                    <div class="flex-1">
                        <h2 class="font-bold text-xl">Победа в катке</h2>
                        <span class="text-yellow-300 text-lg font-semibold">20 грн</span>
                    </div>
                    <input type="number" data-name="Победа в катке" data-price="20" value="0" min="0" class="w-20 ml-4 p-2 bg-gray-900 text-white rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-yellow-500">
                </div>

                <!-- Win Line (Выигранная линия) -->
                <div class="bg-gray-700 p-4 rounded-xl shadow-lg flex items-center justify-between">
                    <div class="flex-1">
                        <h2 class="font-bold text-xl">Выигранная линия</h2>
                        <span class="text-yellow-300 text-lg font-semibold">10 грн</span>
                    </div>
                    <input type="number" data-name="Выигранная линия" data-price="10" value="0" min="0" class="w-20 ml-4 p-2 bg-gray-900 text-white rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-yellow-500">
                </div>
                
                <!-- Ward (Вард) -->
                <div class="bg-gray-700 p-4 rounded-xl shadow-lg flex items-center justify-between">
                    <div class="flex-1">
                        <h2 class="font-bold text-xl">Вард</h2>
                        <span class="text-yellow-300 text-lg font-semibold">5 грн</span>
                    </div>
                    <input type="number" data-name="Вард" data-price="5" value="0" min="0" class="w-20 ml-4 p-2 bg-gray-900 text-white rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-yellow-500">
                </div>

                <!-- Glimmer Cape (Глиммер) -->
                <div class="bg-gray-700 p-4 rounded-xl shadow-lg flex items-center justify-between">
                    <div class="flex-1">
                        <h2 class="font-bold text-xl">Глиммер</h2>
                        <span class="text-yellow-300 text-lg font-semibold">70 грн</span>
                    </div>
                    <input type="number" data-name="Глиммер" data-price="70" value="0" min="0" class="w-20 ml-4 p-2 bg-gray-900 text-white rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-yellow-500">
                </div>
                
                <!-- Force Staff (Форс) -->
                <div class="bg-gray-700 p-4 rounded-xl shadow-lg flex items-center justify-between">
                    <div class="flex-1">
                        <h2 class="font-bold text-xl">Форс</h2>
                        <span class="text-yellow-300 text-lg font-semibold">50 грн</span>
                    </div>
                    <input type="number" data-name="Форс" data-price="50" value="0" min="0" class="w-20 ml-4 p-2 bg-gray-900 text-white rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-yellow-500">
                </div>

                <!-- Moon Shard (Мун шард) -->
                <div class="bg-gray-700 p-4 rounded-xl shadow-lg flex items-center justify-between">
                    <div class="flex-1">
                        <h2 class="font-bold text-xl">Мун шард</h2>
                        <span class="text-yellow-300 text-lg font-semibold">75 грн</span>
                    </div>
                    <input type="number" data-name="Мун шард" data-price="75" value="0" min="0" class="w-20 ml-4 p-2 bg-gray-900 text-white rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-yellow-500">
                </div>

                <!-- Big Lotus (Большой Лотус) -->
                <div class="bg-gray-700 p-4 rounded-xl shadow-lg flex items-center justify-between">
                    <div class="flex-1">
                        <h2 class="font-bold text-xl">Большой Лотус</h2>
                        <span class="text-yellow-300 text-lg font-semibold">10 грн</span>
                    </div>
                    <input type="number" data-name="Большой Лотус" data-price="10" value="0" min="0" class="w-20 ml-4 p-2 bg-gray-900 text-white rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-yellow-500">
                </div>
                
                <!-- 3 Aegis (3 Аегиса) -->
                <div class="bg-gray-700 p-4 rounded-xl shadow-lg flex items-center justify-between">
                    <div class="flex-1">
                        <h2 class="font-bold text-xl">3 Аегиса</h2>
                        <span class="text-yellow-300 text-lg font-semibold">200 грн</span>
                    </div>
                    <input type="number" data-name="3 Аегиса" data-price="200" value="0" min="0" class="w-20 ml-4 p-2 bg-gray-900 text-white rounded-lg text-center focus:outline-none focus:ring-2 focus:ring-yellow-500">
                </div>
            </div>

            <!-- Total and Order Button -->
            <div class="flex flex-col sm:flex-row items-center justify-between mb-6 border-t pt-6 border-gray-700">
                <div class="text-xl font-bold mb-4 sm:mb-0">Итого: <span id="total-price" class="text-yellow-300">0 грн</span></div>
                <button type="submit" class="w-full sm:w-auto px-6 py-3 bg-yellow-500 text-gray-900 font-bold rounded-lg shadow-xl hover:bg-yellow-400 transition-colors">
                    Оформить заказ
                </button>
            </div>
            
            <!-- Message Area -->
            <div id="message" class="text-center text-green-400 font-semibold hidden"></div>

        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('order-form');
            const items = document.querySelectorAll('#item-list input[type="number"]');
            const totalPriceEl = document.getElementById('total-price');
            const messageEl = document.getElementById('message');

            // Listen for changes in quantity inputs to update the total price
            items.forEach(input => {
                input.addEventListener('input', () => {
                    let total = 0;
                    items.forEach(item => {
                        const price = parseFloat(item.dataset.price);
                        const quantity = parseInt(item.value);
                        if (!isNaN(price) && !isNaN(quantity) && quantity > 0) {
                            total += price * quantity;
                        }
                    });
                    totalPriceEl.textContent = `${total} грн`;
                });
            });

            // Handle form submission
            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                // Collect selected items and their quantities
                const order = [];
                items.forEach(item => {
                    const quantity = parseInt(item.value);
                    if (quantity > 0) {
                        const name = item.dataset.name;
                        const price = parseFloat(item.dataset.price);
                        order.push({ name, quantity, price });
                    }
                });

                if (order.length === 0) {
                    messageEl.textContent = 'Пожалуйста, выберите хотя бы один товар.';
                    messageEl.classList.remove('hidden', 'text-green-400');
                    messageEl.classList.add('text-red-400');
                    return;
                }

                const total = order.reduce((acc, item) => acc + item.price * item.quantity, 0);

                // Create the message for the email
                let orderDetails = 'Новый заказ:\n\n';
                order.forEach(item => {
                    orderDetails += `${item.name}: ${item.quantity} шт. (${item.price * item.quantity} грн)\n`;
                });
                orderDetails += `\nИтого: ${total} грн`;

                // --- Placeholder for a real email sending API call ---
                // For security reasons, you cannot send emails directly from client-side JavaScript.
                // You need a backend service or a third-party service like EmailJS.
                // This code demonstrates the structure of such a request.

                // Example using fetch to a hypothetical server endpoint:
                try {
                    // This is a placeholder. Replace with your actual backend endpoint.
                    // const response = await fetch('YOUR_BACKEND_ENDPOINT', {
                    //     method: 'POST',
                    //     headers: {
                    //         'Content-Type': 'application/json',
                    //     },
                    //     body: JSON.stringify({
                    //         to: 'neylkrus@gmail.com',
                    //         subject: 'Новый заказ с сайта DOTA 2',
                    //         body: orderDetails
                    //     }),
                    // });
                    
                    // const result = await response.json();
                    
                    // if (response.ok) {
                    //     messageEl.textContent = 'Заказ успешно отправлен!';
                    //     messageEl.classList.remove('text-red-400', 'hidden');
                    //     messageEl.classList.add('text-green-400');
                    //     form.reset();
                    // } else {
                    //     throw new Error(result.error || 'Произошла ошибка при отправке заказа.');
                    // }

                    // Since a backend is not available, we show a success message as a mock response.
                    messageEl.textContent = 'Заказ успешно оформлен! (Имитация отправки)';
                    messageEl.classList.remove('text-red-400', 'hidden');
                    messageEl.classList.add('text-green-400');
                    form.reset();

                } catch (error) {
                    console.error('Ошибка отправки:', error);
                    messageEl.textContent = `Ошибка при отправке: ${error.message}`;
                    messageEl.classList.remove('text-green-400', 'hidden');
                    messageEl.classList.add('text-red-400');
                }
            });
        });
    </script>
</body>
</html>
